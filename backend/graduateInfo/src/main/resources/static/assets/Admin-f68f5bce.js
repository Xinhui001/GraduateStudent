/* empty css             *//* empty css                    *//* empty css               *//* empty css               *//* empty css                */import{l as V,m as P,o as T,c as R,a as u,d as l,b as x,w as t,n as A,q as F,s as G,v as O,x as $,y,k as d,z as f,A as I,B as J,C as M,D as j,F as H,G as K}from"./index-2712a98b.js";import{r as _}from"./request-0f6daecb.js";const L={class:"card",style:{"margin-bottom":"10px"}},Q={class:"card",style:{"margin-bottom":"10px"}},W={style:{"margin-bottom":"10px"}},X={class:"dialog-footer"},g="/admin",ne={__name:"Admin",setup(Y){const e=V({username:"",name:"",tableData:[],total:0,pageNum:1,pageSize:5,formVisible:!1,form:{}}),i=()=>{_.get(g+"/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,username:e.username,name:e.name}}).then(n=>{var o,r;e.tableData=((o=n.data)==null?void 0:o.list)||[],e.total=((r=n.data)==null?void 0:r.total)||0})};i();const w=()=>{i()},v=()=>{e.username="",e.name="",i()},C=V({username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),c=P(),k=()=>{e.form={},e.formVisible=!0},E=()=>{c.value.validate(n=>{n&&_.request({url:e.form.id?g+"/update":g+"/add",method:e.form.id?"PUT":"POST",data:e.form}).then(o=>{o.code==="200"?(i(),e.formVisible=!1,f.success("操作成功")):f.error(o.msg)})})},U=n=>{e.form=JSON.parse(JSON.stringify(n)),e.formVisible=!0},z=n=>{I.confirm("删除数据后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(o=>{_.delete(g+"/delete/"+n).then(r=>{r.code==="200"?(i(),f.success("操作成功")):f.error(r.msg)})}).catch(o=>{})};return(n,o)=>{const r=A,s=F,m=J,h=G,N=O,p=M,b=j,S=H,B=K,q=$;return T(),R("div",null,[u("div",L,[l(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=a=>e.username=a),placeholder:"请输入用户名查询","prefix-icon":x(y)},null,8,["modelValue","prefix-icon"]),l(r,{style:{width:"260px","margin-right":"10px"},modelValue:e.name,"onUpdate:modelValue":o[1]||(o[1]=a=>e.name=a),placeholder:"请输入姓名查询","prefix-icon":x(y)},null,8,["modelValue","prefix-icon"]),l(s,{onClick:i,type:"primary",style:{"margin-left":"10px"}},{default:t(()=>[d("查询")]),_:1}),l(s,{onClick:v,type:"info"},{default:t(()=>[d("重置")]),_:1})]),u("div",Q,[u("div",W,[l(s,{type:"primary",onClick:k},{default:t(()=>[d("新增")]),_:1})]),u("div",null,[l(h,{data:e.tableData,style:{width:"100%"}},{default:t(()=>[l(m,{prop:"id",label:"序号",width:"70"}),l(m,{prop:"username",label:"用户名"}),l(m,{prop:"name",label:"姓名"}),l(m,{prop:"phone",label:"手机号"}),l(m,{prop:"email",label:"邮箱"}),l(m,{prop:"sex",label:"性别"}),l(m,{label:"操作"},{default:t(a=>[l(s,{type:"primary",onClick:D=>U(a.row),size:"small",plain:""},{default:t(()=>[d("编辑")]),_:2},1032,["onClick"]),l(s,{type:"danger",size:"small",onClick:D=>z(a.row.id),plain:""},{default:t(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),u("div",null,[l(N,{"current-page":e.pageNum,"onUpdate:currentPage":o[2]||(o[2]=a=>e.pageNum=a),"page-size":e.pageSize,"onUpdate:pageSize":o[3]||(o[3]=a=>e.pageSize=a),onCurrentChange:w,background:"",layout:"prev, pager, next",total:e.total},null,8,["current-page","page-size","total"])]),l(q,{width:"35%",modelValue:e.formVisible,"onUpdate:modelValue":o[11]||(o[11]=a=>e.formVisible=a),title:"管理员信息","destroy-on-close":""},{footer:t(()=>[u("div",X,[l(s,{onClick:o[10]||(o[10]=a=>e.formVisible=!1)},{default:t(()=>[d("取 消")]),_:1}),l(s,{type:"primary",onClick:E},{default:t(()=>[d("保 存")]),_:1})])]),default:t(()=>[l(B,{model:e.form,ref_key:"formRef",ref:c,rules:C,"label-width":"100px","label-position":"right",style:{"padding-right":"30px"}},{default:t(()=>[l(p,{label:"用户名",prop:"username"},{default:t(()=>[l(r,{modelValue:e.form.username,"onUpdate:modelValue":o[4]||(o[4]=a=>e.form.username=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"密码",prop:"password"},{default:t(()=>[l(r,{"show-password":"",modelValue:e.form.password,"onUpdate:modelValue":o[5]||(o[5]=a=>e.form.password=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"姓名"},{default:t(()=>[l(r,{modelValue:e.form.name,"onUpdate:modelValue":o[6]||(o[6]=a=>e.form.name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"手机号"},{default:t(()=>[l(r,{modelValue:e.form.phone,"onUpdate:modelValue":o[7]||(o[7]=a=>e.form.phone=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"邮箱"},{default:t(()=>[l(r,{modelValue:e.form.email,"onUpdate:modelValue":o[8]||(o[8]=a=>e.form.email=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),l(p,{label:"性别"},{default:t(()=>[l(S,{modelValue:e.form.sex,"onUpdate:modelValue":o[9]||(o[9]=a=>e.form.sex=a)},{default:t(()=>[l(b,{label:"男"}),l(b,{label:"女"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{ne as default};
